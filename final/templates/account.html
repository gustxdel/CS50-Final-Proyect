{% extends "layout.html" %}
{% block title %} Account {% endblock %}

{% block content %}



<div class="container">
    <h1>Account</h1>
    <form action="/account" method="post">
        <div class="container_flex">
            <div class="mb-3">
                {%if form.name.errors%}
                {{form.name(class="form-control mx-auto w-auto is-invalid", placeholder="Name of Expense")}}
                    {% for error in form.name.errors %}
                        <span>{{error}}</span>
                    {% endfor %}
                    {% else %}
                    {{form.name(class="form-control mx-auto w-auto", placeholder="Name of Expense")}}
                {% endif %}
            </div>
            <div class="mb-3">
                {%if form.expense.errors%}
                {{form.expense(class="form-control mx-auto w-auto is-invalid", placeholder="How much did you spend?")}}
                    {% for error in form.name.errors %}
                        <span>{{error}}</span>
                    {% endfor %}
                    {% else %}
                    {{form.expense(class="form-control mx-auto w-auto", placeholder="How much did you spend?")}}
                {% endif %}
            </div>
            <div class="mb-3">
                {{form.submit(class="btn btn-primary")}}
            </div>
        </div>
    </form>
    <table class="table">
        <thead>
          <tr>
            
            <th scope="col">Name</th>
            <th scope="col">Total Spent</th>

          </tr>
        </thead>
        <tbody>
        {% for row in rows %}
          <tr>
            
            <td>{{row['name']}}</td>
            <td>{{row['SUM(money)']}}</td>
            <td>
                <form action="/delete" method="POST">
                    <input type="hidden" value="{{row['name']}}" name="expense_delete">
                    {{form.delete(class="btn btn-primary")}}
                </form>
            </td>
        {% endfor %} 
          </tr>
          <tr>
            
            <td class="bold">TOTAL</td>
            
            <td class="bold">{{sum}}</td>

        </tbody>
      </table>
</div>

{% endblock %}